(function(e){function t(t){for(var o,i,s=t[0],c=t[1],l=t[2],m=0,d=[];m<s.length;m++)i=s[m],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],o=!0,s=1;s<r.length;s++){var c=r[s];0!==n[c]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var o={},n={app:0},a=[];function i(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=o,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(r,o,function(t){return e[t]}.bind(null,o));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"039a":function(e,t,r){"use strict";r("7174")},"0854":function(e,t,r){"use strict";r("6374")},"207a":function(e,t,r){"use strict";r("d53e")},"416e":function(e,t,r){e.exports=r.p+"img/startHus1.65ea584b.jpg"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("Header"),r("v-main",{staticClass:"py-0"},[r("router-view")],1)],1)},a=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",[r("v-app-bar",{staticStyle:{background:"linear-gradient(to right top, #e8dfe0, #ead3d1, #e9c7be, #e4bea8, #dab692)"},attrs:{app:"",fixed:"",dark:"","elevate-on-scroll":""}},[r("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!e.drawer}}}),r("v-list-item",[r("v-list-item-title",{staticClass:"title"},[r("router-link",{attrs:{to:"/",exact:""}},[e._v(" MYhome ")])],1)],1),!e.loggedIn&&e.inLogin?r("v-btn",{attrs:{color:"white",text:"",to:"/signup"}},[r("span",[e._v("Registrera ")]),r("v-icon",{attrs:{right:""}})],1):e._e(),e.loggedIn?r("v-btn",{attrs:{to:"/login",color:"grey",text:""},on:{click:e.logout}},[r("span",[e._v("Logga ut ")]),r("v-icon",{attrs:{right:""}})],1):e._e(),!e.loggedIn&&e.inSignup?r("v-btn",{attrs:{to:"/login",color:"white",text:""}},[r("span",[e._v("Logga in")]),r("v-icon",{attrs:{right:""}})],1):e._e()],1),r("v-navigation-drawer",{staticClass:"deep-purple accent-4",staticStyle:{background:"linear-gradient(to right top, #e8dfe0, #ead3d1, #e9c7be, #e4bea8, #dab692)"},attrs:{dark:"",app:""},scopedSlots:e._u([{key:"append",fn:function(){return[r("div",{staticClass:"pa-2"},[e.loggedIn?r("v-btn",{attrs:{to:"/login",block:"",color:"accent1"},on:{click:e.logout}},[e._v(" Logout ")]):e._e()],1)]},proxy:!0}]),model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("v-list",e._l(e.items,(function(t){return r("v-list-item",{key:t.title,attrs:{link:""}},[r("v-list-item-icon",[r("v-icon",[e._v(e._s(t.icon))])],1),r("v-list-item-content",[r("router-link",{attrs:{to:t.link,exact:""}},[r("v-list-item-title",[e._v(e._s(t.title))])],1)],1)],1)})),1)],1)],1)},s=[],c=(r("96cf"),r("1da1")),l={name:"Header",data:function(){return{drawer:!1,items:[{title:"Dashboard",icon:"mdi-view-dashboard",link:"/"},{title:"Mitt Hus",icon:"mdi-home-city",link:"/house"},{title:"Projekt",icon:"mdi-calendar-check-outline",link:"/project"},{title:"Inventarier",icon:"mdi-ballot",link:"/item"}]}},methods:{logout:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("SESSION/logout");case 2:localStorage.setItem("loggedIn",JSON.stringify(!1));case 3:case"end":return t.stop()}}),t)})))()}},computed:{loggedIn:function(){return this.$store.getters["SESSION/getLoggedIn"]},inLogin:function(){return this.$store.getters["SESSION/getInLogin"]},inSignup:function(){return this.$store.getters["SESSION/getInSignup"]}}},u=l,m=(r("e1ba"),r("2877")),d=r("6544"),p=r.n(d),g=r("40dc"),f=r("5bc1"),v=r("8336"),h=r("132d"),I=r("8860"),j=r("da13"),x=r("5d23"),b=r("34c3"),_=r("f774"),R=Object(m["a"])(u,i,s,!1,null,"8e288dfa",null),O=R.exports;p()(R,{VAppBar:g["a"],VAppBarNavIcon:f["a"],VBtn:v["a"],VIcon:h["a"],VList:I["a"],VListItem:j["a"],VListItemContent:x["a"],VListItemIcon:b["a"],VListItemTitle:x["c"],VNavigationDrawer:_["a"]});var k={name:"App",components:{Header:O},mounted:function(){this.$store.dispatch("ITEMS/setItemFromStorage"),this.$store.dispatch("FILE/setFiles"),this.$store.dispatch("PROJECT/setProjects"),this.$store.dispatch("HOUSE/setHouses"),this.$store.dispatch("ROOM/setRooms"),this.$store.dispatch("ITEMS/setItems")}},w=k,P=r("7496"),S=r("f6c4"),y=Object(m["a"])(w,n,a,!1,null,null,null),C=y.exports;p()(y,{VApp:P["a"],VMain:S["a"]});var E=r("f309");o["a"].use(E["a"]);var T=new E["a"]({theme:{themes:{light:{base:"#E8DFE0",primary:"#DAB692",secondary:"#8f5b34",accent1:"#8A9EA7",accent2:"#8D9B6A"}}}}),$=T,V=(r("45fc"),r("b0c0"),r("8c4f")),F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"py-16",attrs:{fluid:"","max-width":"300"}},[r("Quick-start"),r("v-row",{staticClass:"justify-center"},[r("v-col",{attrs:{cols:"12",justify:"center"}},[r("Dashboard",{attrs:{"max-width":"300"}})],1),r("v-col",{attrs:{cols:"12",justify:"center"}},[r("ActionCard",{attrs:{"max-width":"300"}})],1)],1)],1)},H=[],N=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",{staticClass:"mx-auto pt-2 mt-2",attrs:{"max-width":"900",color:"primary"}},[void 0!==e.project?o("v-card-title",[o("h1",[e._v("Välkommen!")])]):e._e(),void 0!==e.project?o("v-card-title",[o("div",[o("h3",[e._v("Senaste projekt:")]),o("h4",[e._v(" "+e._s(e.project.projectName)+" ")])])]):e._e(),o("v-img",{attrs:{height:"400",src:r("416e")}}),void 0!==e.projects?o("v-expansion-panels",{staticClass:"pb-2",attrs:{color:"primary",popout:""}},[o("h2",[e._v(" Mina aktiva projekt ")]),e._l(e.projects,(function(t){return o("v-expansion-panel",{key:t._id,attrs:{color:"primary",fucosable:""}},[o("v-expansion-panel-header",{attrs:{color:"primary"}},[o("h3",[e._v(" "+e._s(t.projectName)+" ")])]),o("v-expansion-panel-content",{attrs:{color:"primary"}},[o("div",{staticClass:"d-flex justify-space-between mt-2"},[o("div",{staticClass:"d-flex flex-column"},[o("p",[e._v("Projektbeskrivning: "),o("br"),e._v(e._s(t.description))]),t.roomId?o("p",[e._v("Rum: "),o("br"),e._v(" "+e._s(t.roomId.roomName)+" ")]):e._e(),o("p",[e._v("Kategori: "),o("br"),e._v(" "+e._s(t.category))])]),o("v-btn",{staticClass:"align-self-center",attrs:{fab:"",color:"accent2"},on:{click:function(r){return e.goToProjectHandler(t)}}},[o("v-icon",{attrs:{color:"white"}},[e._v("mdi-arrow-right")])],1)],1)])],1)}))],2):e._e()],1)},M=[],J={namespaced:!0,name:"Dashboard",data:function(){return{settings:[]}},methods:{goToProjectHandler:function(e){this.$store.dispatch("PROJECT/setProject",e),localStorage.setItem("currentProject",JSON.stringify(e)),this.$router.push("Project")}},computed:{projects:function(){return this.$store.getters["PROJECT/getProjects"]},project:function(){return void 0!==this.$store.getters["PROJECT/getProject"]&&0!==this.$store.getters["PROJECT/getProject"].length?this.$store.getters["PROJECT/getProjectFromProjects"](this.$store.getters["PROJECT/getProject"]._id):[]}}},D=J,L=(r("6888"),r("b0af")),A=r("99d9"),B=r("cd55"),U=r("49e2"),G=r("c865"),z=r("0393"),q=r("adda"),Q=Object(m["a"])(D,N,M,!1,null,"d0b8a776",null),K=Q.exports;p()(Q,{VBtn:v["a"],VCard:L["a"],VCardTitle:A["c"],VExpansionPanel:B["a"],VExpansionPanelContent:U["a"],VExpansionPanelHeader:G["a"],VExpansionPanels:z["a"],VIcon:h["a"],VImg:q["a"]});var Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"pa-0"},[r("v-speed-dial",{attrs:{height:"100vh",fixed:"",bottom:"",absolute:"",right:""},scopedSlots:e._u([{key:"activator",fn:function(){return[r("v-btn",{attrs:{fab:"",dark:"","x-large":"",color:"accent2"},model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[e.fab?r("v-icon",[e._v(" mdi-close ")]):r("v-icon",[e._v(" mdi-plus ")])],1)]},proxy:!0}]),model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[r("v-btn",{attrs:{fab:"",dark:"",medium:"",color:"accent1"},on:{click:function(t){e.dialogRoom=!0}}},[r("v-icon",[e._v("mdi-home-city-outline")])],1),r("v-btn",{attrs:{fab:"",dark:"",medium:"",color:"primary"},on:{click:function(t){e.dialogProject=!0}}},[r("v-icon",[e._v("mdi-calendar-check-outline")])],1),r("v-btn",{attrs:{fab:"",dark:"",medium:"",color:"secondary"},on:{click:function(t){e.dialogItem=!0}}},[r("v-icon",[e._v("mdi-ballot")])],1)],1),r("v-dialog",{attrs:{width:"500"},model:{value:e.dialogItem,callback:function(t){e.dialogItem=t},expression:"dialogItem"}},[r("CreateItem",{on:{"close-dialog":e.closeDialogItem}})],1),r("v-dialog",{attrs:{width:"500"},model:{value:e.dialogProject,callback:function(t){e.dialogProject=t},expression:"dialogProject"}},[r("CreateProject",{on:{"close-dialog":e.closeDialogProject}})],1),r("v-dialog",{attrs:{width:"500"},model:{value:e.dialogRoom,callback:function(t){e.dialogRoom=t},expression:"dialogRoom"}},[r("CreateRoom",{on:{"close-dialog":e.closeDialogRoom}})],1)],1)},W=[],X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center"},[r("v-card",{staticClass:"mx-auto mt-2 px-1",attrs:{color:"base"}},[r("v-card-title",{attrs:{placeholder:"test"}},[e._v(" Lägg till inventarie ")]),r("v-text-field",{attrs:{label:"Namn",rules:e.rules,placeholder:"Skriv in namnet på inventariet"},model:{value:e.itemName,callback:function(t){e.itemName=t},expression:"itemName"}}),r("v-text-field",{attrs:{label:"Garanti",rules:e.rules,placeholder:"Hur många års garanti har produkten"},model:{value:e.warranty,callback:function(t){e.warranty=t},expression:"warranty"}}),r("v-textarea",{attrs:{label:"Beskriving",rules:e.rules},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,n=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:"Inköpsdatum","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.orderDate,callback:function(t){e.orderDate=t},expression:"orderDate"}},"v-text-field",n,!1),o))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[r("v-date-picker",{ref:"picker",attrs:{max:(new Date).toISOString().substr(0,10),min:"1950-01-01"},model:{value:e.orderDate,callback:function(t){e.orderDate=t},expression:"orderDate"}})],1),void 0!==e.rooms?r("v-select",{attrs:{"prepend-icon":"mdi-home-city",items:e.rooms.map((function(e){return e})),"item-text":"roomName","item-value":"_id",placeholder:"Välj rum"},model:{value:e.selectedRoomId,callback:function(t){e.selectedRoomId=t},expression:"selectedRoomId"}}):e._e(),void 0!==e.projects?r("v-select",{attrs:{"prepend-icon":"mdi-calendar-check-outline",items:e.projects.map((function(e){return e})),"item-text":"projectName","item-value":"._id",placeholder:"Välj projekt"},model:{value:e.selectedProjectId,callback:function(t){e.selectedProjectId=t},expression:"selectedProjectId"}}):e._e(),r("ImageUploader"),r("FileUploader"),r("v-card-actions",[r("v-btn",{attrs:{color:"accent2"},on:{click:e.createItemHandler}},[e._v(" Spara ")])],1)],1)],1)},Z=[],ee=(r("a4d3"),r("e01a"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.sendImage(t)}}},[r("div",{staticClass:"field"},[r("v-file-input",{ref:"imag",attrs:{label:"Image upload",filled:"","prepend-icon":"mdi-camera",type:"file",accept:"image"},on:{change:e.selectFile}}),r("div",{staticClass:"field"},[r("v-btn",{on:{click:function(t){return e.uploadImage(e.selectedFile)}}},[e._v(" Ladda upp bilden ")])],1)],1)])],1)}),te=[],re={name:"ImageUploader",data:function(){return{selectedFile:null}},methods:{selectFile:function(e){this.selectedFile=e},uploadImage:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("IMAGE/uploadImageToDB",e);case 2:case"end":return r.stop()}}),r)})))()}}},oe=re,ne=r("23a7"),ae=r("4bd4"),ie=Object(m["a"])(oe,ee,te,!1,null,null,null),se=ie.exports;p()(ie,{VBtn:v["a"],VFileInput:ne["a"],VForm:ae["a"]});var ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.sendFile(t)}}},[r("div",{staticClass:"field"},[r("v-file-input",{ref:"file",attrs:{label:"File upload",filled:"","prepend-icon":"mdi-camera",type:"file",accept:"file"},on:{change:e.selectFile}}),r("div",{staticClass:"field"},[r("v-btn",{on:{click:function(t){return e.uploadFile(e.selectedFile)}}},[e._v(" Ladda upp filen ")])],1)],1)])],1)},le=[],ue={name:"FileUploader",data:function(){return{selectedFile:null}},methods:{selectFile:function(e){this.selectedFile=e},uploadFile:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.next=3,t.$store.dispatch("FILE/uploadFileToDB",e);case 3:case"end":return r.stop()}}),r)})))()}}},me=ue,de=Object(m["a"])(me,ce,le,!1,null,null,null),pe=de.exports;p()(de,{VBtn:v["a"],VFileInput:ne["a"],VForm:ae["a"]});var ge={components:{ImageUploader:se,FileUploader:pe},name:"CreatItem",data:function(){return{itemName:"",description:"",orderDate:"",warranty:"",receipt:"",selectedProjectId:void 0,selectedRoomId:void 0,rules:[function(e){return!!e||"Required."},function(e){return e&&e.length>=3||"Min 3 characters"}],date:null,menu:!1}},watch:{menu:function(e){var t=this;e&&setTimeout((function(){return t.$refs.picker.activePicker="YEAR"}))}},computed:{projects:function(){return this.$store.getters["PROJECT/getProjects"]},project:function(){return void 0!==this.$store.getters["PROJECT/getProjectFromProjects"](this.selectedProjectId)?this.$store.getters["PROJECT/getProjectFromProjects"](this.selectedProjectId):[]},room:function(){return void 0!==this.$store.getters["ROOM/getRoomFromRooms"](this.selectedRoomId)?this.$store.getters["ROOM/getRoomFromRooms"](this.selectedRoomId):[]},rooms:function(){return this.$store.getters["ROOM/getRooms"]}},methods:{save:function(e){this.$refs.menu.save(e)},createItemHandler:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={itemName:e.itemName,imageId:e.$store.getters["IMAGE/getImage"]._id,description:e.description,orderDate:e.orderDate,fileId:e.$store.getters["FILE/getFile"]._id,warranty:e.warranty,projectId:e.selectedProjectId,roomId:e.selectedRoomId},t.next=3,e.$store.dispatch("PROJECT/setProject",e.project);case 3:return t.next=5,e.$store.dispatch("ROOM/setRoom",e.room);case 5:return t.next=7,e.$store.dispatch("ITEMS/createItem",r);case 7:return t.next=9,e.$store.dispatch("PROJECT/addItemToProject",e.$store.getters["ITEMS/getItem"]._id);case 9:if(0===e.$store.getters["PROJECT/getProject"].length){t.next=12;break}return t.next=12,e.$store.dispatch("PROJECT/updateProject",e.$store.getters["PROJECT/getProject"]);case 12:return t.next=14,e.$store.dispatch("ROOM/addItemToRoom",e.$store.getters["ITEMS/getItem"]._id);case 14:if(0===e.$store.getters["ROOM/getRoom"].length){t.next=17;break}return t.next=17,e.$store.dispatch("ROOM/updateRoom",e.$store.getters["ROOM/getRoom"]);case 17:return t.next=19,e.$store.dispatch("PROJECT/setProjects");case 19:return t.next=21,e.$store.dispatch("ROOM/setRooms");case 21:e.$emit("close-dialog");case 22:case"end":return t.stop()}}),t)})))()}}},fe=ge,ve=r("2e4b"),he=r("e449"),Ie=r("b974"),je=r("8654"),xe=r("a844"),be=Object(m["a"])(fe,X,Z,!1,null,null,null),_e=be.exports;p()(be,{VBtn:v["a"],VCard:L["a"],VCardActions:A["a"],VCardTitle:A["c"],VDatePicker:ve["a"],VMenu:he["a"],VSelect:Ie["a"],VTextField:je["a"],VTextarea:xe["a"]});var Re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center"},[r("v-card",{staticClass:"mx-auto mt-2 px-1",attrs:{color:"base"}},[r("v-card-title",{attrs:{placeholder:"test"}},[e._v(" Lägg till projekt ")]),r("v-text-field",{attrs:{label:"Namn",rules:e.rules,placeholder:"Skriv in namnet på projektet"},model:{value:e.projectName,callback:function(t){e.projectName=t},expression:"projectName"}}),r("v-textarea",{attrs:{label:"Beskrivning",rules:e.rules,placeholder:"Beskriv projektet"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),r("v-text-field",{attrs:{label:"Kategori",rules:e.rules,placeholder:"Välj en kategori för projektet"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}}),void 0!==e.rooms?r("v-select",{attrs:{"prepend-icon":"mdi-home-city",items:e.rooms.map((function(e){return e})),"item-text":"roomName","item-value":"_id",placeholder:"Välj rum"},model:{value:e.selectedRoomId,callback:function(t){e.selectedRoomId=t},expression:"selectedRoomId"}}):e._e(),r("ImageUploader"),r("v-card-actions",[r("v-btn",{on:{click:e.createProjectHandler}},[e._v(" Skapa projekt ")]),r("v-spacer")],1)],1)],1)},Oe=[],ke={name:"CreateProject",components:{ImageUploader:se},data:function(){return{projectName:"",imageId:"",description:"",category:"",selectedRoomId:void 0,rules:[function(e){return!!e||"Required."},function(e){return e&&e.length>=3||"Min 3 characters"}]}},methods:{createProjectHandler:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={projectName:e.projectName,imageId:e.$store.getters["IMAGE/getImage"]._id,description:e.description,roomId:e.selectedRoomId,category:e.category,itemsId:e.selectedItemId},t.next=3,e.$store.dispatch("ROOM/setRoom",e.room);case 3:return t.next=5,e.$store.dispatch("PROJECT/createProject",r);case 5:return t.next=7,e.$store.dispatch("ROOM/addProjectToRoom",e.$store.getters["PROJECT/getProject"]._id);case 7:if(0===e.$store.getters["ROOM/getRoom"].length){t.next=10;break}return t.next=10,e.$store.dispatch("ROOM/updateRoom",e.$store.getters["ROOM/getRoom"]);case 10:return t.next=12,e.$store.dispatch("ROOM/setRooms");case 12:return t.next=14,e.$store.dispatch("PROJECT/setProjects");case 14:e.$emit("close-dialog");case 15:case"end":return t.stop()}}),t)})))()}},computed:{items:function(){return this.$store.getters["ITEMS/getItems"]},room:function(){return void 0!==this.$store.getters["ROOM/getRoomFromRooms"](this.selectedRoomId)?this.$store.getters["ROOM/getRoomFromRooms"](this.selectedRoomId):[]},rooms:function(){return this.$store.getters["ROOM/getRooms"]}}},we=ke,Pe=r("2fa4"),Se=Object(m["a"])(we,Re,Oe,!1,null,null,null),ye=Se.exports;p()(Se,{VBtn:v["a"],VCard:L["a"],VCardActions:A["a"],VCardTitle:A["c"],VSelect:Ie["a"],VSpacer:Pe["a"],VTextField:je["a"],VTextarea:xe["a"]});var Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center"},[r("v-card",{staticClass:"mx-auto mt-2 px-1",attrs:{color:"base"}},[r("v-card-title",{attrs:{placeholder:"test"}},[e._v(" Lägg till rum i "+e._s(e.house.houseName)+" ")]),r("v-text-field",{attrs:{label:"Namn",rules:e.rules,placeholder:"Skriv in namnet på rummet"},model:{value:e.roomName,callback:function(t){e.roomName=t},expression:"roomName"}}),r("v-text-field",{attrs:{label:"Storlek",rules:e.rules,placeholder:"Rummets storlek i kvm"},model:{value:e.roomSize,callback:function(t){e.roomSize=t},expression:"roomSize"}}),r("v-text-field",{attrs:{label:"Höjd",rules:e.rules,placeholder:"Rummets höjd"},model:{value:e.roomHeight,callback:function(t){e.roomHeight=t},expression:"roomHeight"}}),r("v-card-actions",[r("v-btn",{on:{click:e.createRoomHandler}},[e._v(" Skapa rum ")]),r("v-spacer")],1)],1)],1)},Ee=[],Te={name:"CreateRoom",data:function(){return{roomName:"",roomSize:"",roomHeight:"",rules:[function(e){return!!e||"Required."},function(e){return e&&e.length>=3||"Min 3 characters"}],dialog:!1}},computed:{house:function(){return this.$store.getters["HOUSE/getHouse"]}},methods:{createRoomHandler:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={houseId:e.house._id,roomName:e.roomName,roomSize:e.roomSize,roomHeight:e.roomHeight},t.next=3,e.$store.dispatch("ROOM/createRoom",r);case 3:return t.next=5,e.$store.dispatch("HOUSE/addRoomToHouse",e.$store.getters["ROOM/getRoom"]._id);case 5:return t.next=7,e.$store.dispatch("HOUSE/updateHouse",e.$store.getters["HOUSE/getHouse"]);case 7:return t.next=9,e.$store.dispatch("HOUSE/setHouseFromDb",e.$store.getters["HOUSE/getHouse"]._id);case 9:return t.next=11,e.$store.dispatch("HOUSE/setHouses");case 11:e.$store.dispatch("ROOM/computedRooms",e.$store.getters["HOUSE/getHouse"]._id),e.$emit("close-dialog");case 13:case"end":return t.stop()}}),t)})))()}}},$e=Te,Ve=Object(m["a"])($e,Ce,Ee,!1,null,null,null),Fe=Ve.exports;p()(Ve,{VBtn:v["a"],VCard:L["a"],VCardActions:A["a"],VCardTitle:A["c"],VSpacer:Pe["a"],VTextField:je["a"]});var He={components:{CreateItem:_e,CreateProject:ye,CreateRoom:Fe},name:"QuickStart",data:function(){return{fab:!1,dialogItem:!1,dialogProject:!1,dialogRoom:!1}},methods:{closeDialogRoom:function(){this.dialogRoom=!1},closeDialogProject:function(){this.dialogRoom=!1},closeDialogItem:function(){this.dialogRoom=!1}}},Ne=He,Me=r("a523"),Je=r("169a"),De=r("c73b"),Le=Object(m["a"])(Ne,Y,W,!1,null,null,null),Ae=Le.exports;p()(Le,{VBtn:v["a"],VContainer:Me["a"],VDialog:Je["a"],VIcon:h["a"],VSpeedDial:De["a"]});var Be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"mx-auto pt-2 d-flex justify-space-around align-center flex-wrap",attrs:{"max-width":"900",color:"primary",height:"20rem"}},[r("v-dialog",{scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[r("div",e._g({staticClass:"project_button"},o),[r("div",{staticClass:"inside_div"},[r("h3",[e._v("Skapa ditt projekt")])])])]}}]),model:{value:e.dialogProject,callback:function(t){e.dialogProject=t},expression:"dialogProject"}},[r("CreateProject",{on:{"close-dialog":e.closeDialogProject}})],1),r("v-dialog",{scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[r("div",e._g({staticClass:"inventory_button"},o),[r("div",{staticClass:"inside_div"},[r("h3",[e._v("Lägg till inventarie")])])])]}}]),model:{value:e.dialogInventory,callback:function(t){e.dialogInventory=t},expression:"dialogInventory"}},[r("CreateItem",{on:{"close-dialog":e.closeDialogInventory}})],1)],1)},Ue=[],Ge={name:"ActionCard",data:function(){return{dialogProject:!1,dialogInventory:!1}},components:{CreateItem:_e,CreateProject:ye},methods:{closeDialogProject:function(){this.dialogProject=!1},closeDialogInventory:function(){this.dialogInventory=!1}}},ze=Ge,qe=(r("ae50"),Object(m["a"])(ze,Be,Ue,!1,null,"243c5648",null)),Qe=qe.exports;p()(qe,{VCard:L["a"],VDialog:Je["a"]});var Ke={name:"Home",components:{Dashboard:K,QuickStart:Ae,ActionCard:Qe}},Ye=Ke,We=(r("cccb"),r("62ad")),Xe=r("0fd9"),Ze=Object(m["a"])(Ye,F,H,!1,null,null,null),et=Ze.exports;p()(Ze,{VCol:We["a"],VContainer:Me["a"],VRow:Xe["a"]});var tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return void 0!==e.project?r("v-container",{staticClass:"py-16",attrs:{fluid:"","min-width":"300"}},[r("Quick-start"),r("v-row",[r("v-col",{attrs:{sm:"6",md:"6","order-md":"1",color:"secondary"}},[r("v-card",{staticClass:"mx-auto mt-2 px-1 ",attrs:{color:"primary","max-width":"900","min-width":"280"}},[r("div",{staticClass:"d-flex justify-space-between"},[r("v-card-title",{staticClass:"card-header"},[e._v(" Mitt valda projekt: "),r("br"),e._v(" "+e._s(e.project.projectName)+" ")]),r("div",{staticClass:"edit-buttons d-flex pt-4",attrs:{color:"accent2"}},[r("Delete-project-dialog",{attrs:{project:e.project}}),r("EditProject",{attrs:{project:e.project}})],1)],1),r("div",{staticClass:"d-flex justify-center px-4"},[void 0!==e.project.imageId?r("v-img",{attrs:{height:"200",src:e.image}}):e._e()],1),r("v-card-title",[e._v("Beskrivning")]),r("v-card-text",[e._v(" "+e._s(e.project.description)+" ")]),r("v-expansion-panels",{staticClass:"pb-2",attrs:{color:"primary",popout:""}},[e.project.roomId?r("v-expansion-panel",{attrs:{color:"primary"}},[r("v-expansion-panel-header",{attrs:{color:"primary"}},[e._v(" Rum ")]),r("v-expansion-panel-content",{attrs:{color:"primary"}},[e._v(" "+e._s(e.project.roomId.roomName)+" ")])],1):e._e(),e.project.category?r("v-expansion-panel",[r("v-expansion-panel-header",{attrs:{color:"primary"}},[e._v(" Kategori ")]),r("v-expansion-panel-content",{attrs:{color:"primary"}},[e._v(" "+e._s(e.project.category)+" ")])],1):e._e(),r("v-expansion-panel",[r("v-expansion-panel-header",{attrs:{color:"primary"}},[e._v(" Inventarier ")]),e._l(e.project.itemsId,(function(t){return r("v-expansion-panel-content",{key:t._id,attrs:{fucosable:"",color:"primary"}},[r("v-list-item",{attrs:{fluid:""}},[r("v-btn",{key:t._id,staticClass:"mx-auto my-auto mb-0",attrs:{width:"70%",depressed:""},on:{click:function(r){return e.goToItemHandler(t)}}},[e._v(e._s(t.itemName))]),r("v-list-item",[r("v-btn",{key:t._id+1,staticClass:"my-auto mb-0 mr-1 ",attrs:{icon:"",depressed:""},on:{click:function(r){return e.deleteItemHandler(t._id)}}},[r("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("mdi-delete")])],1),r("v-btn",{key:t._id+2,staticClass:"my-auto mb-0 ",attrs:{icon:"",depressed:""},on:{click:function(r){return e.deleteItemHandler(t._id)}}},[r("v-icon",{attrs:{color:"grey lighten-1"}},[e._v("mdi-pencil")])],1)],1)],1)],1)}))],2),e.project.fileId?r("v-expansion-panel",[r("v-expansion-panel-header",{attrs:{color:"primary"}},[e._v(" Dokument ")]),r("v-expansion-panel-content",[r("div",{staticClass:"d-flex justify-space-between align-center"},[r("div",[r("v-icon",[e._v("mdi-arrow-up-bold-box-outline")]),e._v(" Namn på filen ")],1),r("v-btn",{attrs:{color:"accent2",href:e.fileURL}},[e._v("hämta fil ")])],1)])],1):e._e()],1)],1)],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-card",{staticClass:"mx-auto mt-2",attrs:{"max-width":"900",color:"primary"}},[r("v-card-text",[r("h5",[e._v("Alla Projekt")]),e._l(e.projects,(function(t,o){return r("v-list-item",{key:o,attrs:{"two-line":""}},[r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(t.projectName))]),r("v-list-item-subtitle",[e._v(" "+e._s(t.description)+", ")])],1),r("v-list-item-action",[r("v-btn",{attrs:{icon:""},on:{click:function(r){return e.openProjectDetails(t)}}},[r("v-icon",{attrs:{color:"secondary"}},[e._v("mdi-open-in-new")])],1)],1)],1)}))],2)],1)],1)],1)],1):e._e()},rt=[],ot=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"344"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",n,!1),o),[r("v-icon",{attrs:{color:"secondary"}},[e._v("mdi-delete")])],1)]}}]),model:{value:e.dialogBox,callback:function(t){e.dialogBox=t},expression:"dialogBox"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v("Radera projekt")]),r("v-card-text",[r("div",{staticClass:"text-h5 mt-4 text-center"},[e._v(" Vill du radera "+e._s(e.project.projectName)+"? ")])]),r("v-card-actions",{staticClass:"justify-center"},[r("v-btn",{attrs:{color:"accent1"},on:{click:function(t){return e.deleteProjectHandler(e.project._id)}}},[e._v("JA")]),r("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.dialogBox=!1}}},[e._v("NEJ")])],1)],1)],1)},nt=[],at={name:"deleteProjectDialog",data:function(){return{dialogBox:!1}},props:{project:{type:Object}},methods:{deleteProjectHandler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("PROJECT/deleteProject",e);case 2:void 0!==t.$store.getters["PROJECT/getProject"]&&(0!==t.$store.getters["PROJECT/getProject"].length?localStorage.setItem("currentProject",JSON.stringify(t.$store.getters["PROJECT/getProjects"][0])):localStorage.setItem("currentProject",[])),t.$store.dispatch("PROJECT/setProjects"),t.$store.dispatch("ITEMS/setItems"),t.dialogBox=!1;case 6:case"end":return r.stop()}}),r)})))()}}},it=at,st=r("71d9"),ct=Object(m["a"])(it,ot,nt,!1,null,null,null),lt=ct.exports;p()(ct,{VBtn:v["a"],VCard:L["a"],VCardActions:A["a"],VCardText:A["b"],VDialog:Je["a"],VIcon:h["a"],VToolbar:st["a"]});var ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({attrs:{icon:""},on:{click:e.storeOldId}},"v-btn",n,!1),o),[r("v-icon",{attrs:{color:"secondary"}},[e._v("mdi-pencil")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",{staticClass:"mx-auto mt-2",attrs:{color:"base"}},[r("v-card-title",[e._v(" Ändra i ditt Projekt ")]),r("v-text-field",{attrs:{label:"Namn",rules:e.rules,placeholder:"Namn på projektet"},model:{value:e.project.projectName,callback:function(t){e.$set(e.project,"projectName",t)},expression:"project.projectName"}}),r("v-text-field",{attrs:{label:"Kategori",rules:e.rules,placeholder:"kategori"},model:{value:e.project.category,callback:function(t){e.$set(e.project,"category",t)},expression:"project.category"}}),r("v-textarea",{attrs:{label:"Beskriving",rules:e.rules},model:{value:e.project.description,callback:function(t){e.$set(e.project,"description",t)},expression:"project.description"}}),r("v-select",{attrs:{"prepend-icon":"mdi-calendar-check-outline",items:e.items.map((function(e){return e})),"item-text":"projectName","item-value":"_id",placeholder:e.item.itemName},model:{value:e.project.itemsId,callback:function(t){e.$set(e.project,"itemsId",t)},expression:"project.itemsId"}}),r("v-select",{attrs:{"prepend-icon":"mdi-home-city",items:e.rooms.map((function(e){return e})),"item-text":"roomName","item-value":"_id",placeholder:e.project.roomId},model:{value:e.project.roomId,callback:function(t){e.$set(e.project,"roomId",t)},expression:"project.roomId"}}),r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}}),r("v-img",{staticClass:"mb-2",attrs:{contain:"","lazy-src":e.image,src:e.image,"max-height":"100 "}}),r("ImageUploader"),r("FileUploader"),e.project.fileId?r("div",[r("v-icon",[e._v("mdi-arrow-up-bold-box-outline")]),e._v(e._s(e.project.fileId)+" ")],1):e._e(),r("v-card-actions",[r("v-btn",{attrs:{color:"accent2"},on:{click:e.updateProjectHandler}},[e._v(" Spara ")])],1)],1)],1)},mt=[],dt={components:{ImageUploader:se,FileUploader:pe},name:"EditProject",data:function(){return{rules:[function(e){return!!e||"Required."},function(e){return e&&e.length>=3||"Min 3 characters"}],menu:!1,inputField:!1,dialog:!1}},computed:{items:function(){return this.$store.getters["ITEMS/getItems"]},image:function(){return"api/images/"+this.$store.getters["PROJECT/getProject"].imageId},projects:function(){return this.$store.getters["PROJECT/getProjects"]},project:function(){return this.$store.getters["PROJECT/getProject"]},item:function(){return void 0!==this.$store.getters["ITEMS/getItemFromItems"](this.project.itemId)?this.$store.getters["ITEMS/getItemFromItems"](this.project.itemId):[]},rooms:function(){return this.$store.getters["ROOM/getRooms"]},room:function(){return this.$store.getters["ROOM/getRoomFromRooms"](this.item.roomId)}},methods:{storeOldId:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.commit("PROJECT/setOldProject",e.project);case 2:return t.next=4,e.$store.commit("IMAGE/setOldImage",e.project.imageId);case 4:return t.next=6,e.$store.commit("FILE/setOldFile",e.project.fileId);case 6:case"end":return t.stop()}}),t)})))()},updateProjectHandler:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={_id:e.project._id,projectName:e.project.projectName,imageId:e.$store.getters["IMAGE/getImage"]._id,description:e.project.description,category:e.project.category,fileId:e.$store.getters["FILE/getFile"]._id,itemsId:e.project.itemsId,roomId:e.item.roomId},t.next=3,e.$store.dispatch("PROJECT/updateProject",r);case 3:return localStorage.setItem("currentProject",JSON.stringify(e.$store.getters["PROJECT/getProject"])),t.next=6,e.$store.dispatch("FILE/updateFile",r.fileId);case 6:return t.next=8,e.$store.dispatch("ITEMS/setItem",e.item);case 8:return t.next=10,e.$store.dispatch("ITEMS/moveProjectToItems",e.$store.getters["ITEMS/getItem"]._id);case 10:e.dialog=!1;case 11:case"end":return t.stop()}}),t)})))()}}},pt=dt,gt=Object(m["a"])(pt,ut,mt,!1,null,null,null),ft=gt.exports;p()(gt,{VBtn:v["a"],VCard:L["a"],VCardActions:A["a"],VCardTitle:A["c"],VDialog:Je["a"],VIcon:h["a"],VImg:q["a"],VMenu:he["a"],VSelect:Ie["a"],VTextField:je["a"],VTextarea:xe["a"]});var vt={namespaced:!0,name:"Project",data:function(){return{}},components:{QuickStart:Ae,DeleteProjectDialog:lt,EditProject:ft},methods:{openProjectDetails:function(e){this.$store.dispatch("PROJECT/setProject",e),this.$store.dispatch("IMAGE/setImage",this.$store.getters["PROJECT/getProject"].imageId),localStorage.setItem("currentProject",JSON.stringify(e)),window.scrollTo(0,0),console.log(this.project)},log:function(e){console.log(e)},goToItemHandler:function(e){this.$store.dispatch("ITEMS/setItem",e),localStorage.setItem("currentItem",JSON.stringify(e)),this.$router.push("Item")},deleteItemHandler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("ITEMS/deleteItem",e);case 2:t.$store.dispatch("PROJECT/setProjects");case 3:case"end":return r.stop()}}),r)})))()}},computed:{projects:function(){return this.$store.getters["PROJECT/getProjects"]},project:function(){return this.$store.getters["PROJECT/getProjectFromProjects"](this.$store.getters["PROJECT/getProject"]._id)},image:function(){return"api/images/"+this.$store.getters["PROJECT/getProject"].imageId},files:function(){return this.$store.getters["FILE/getFiles"]},fileURL:function(){return"/api/files/"+this.$store.getters["PROJECT/getProject"].fileId}}},ht=vt,It=(r("c782"),r("1800")),jt=Object(m["a"])(ht,tt,rt,!1,null,"ae512c64",null),xt=jt.exports;p()(jt,{VBtn:v["a"],VCard:L["a"],VCardText:A["b"],VCardTitle:A["c"],VCol:We["a"],VContainer:Me["a"],VExpansionPanel:B["a"],VExpansionPanelContent:U["a"],VExpansionPanelHeader:G["a"],VExpansionPanels:z["a"],VIcon:h["a"],VImg:q["a"],VListItem:j["a"],VListItemAction:It["a"],VListItemContent:x["a"],VListItemSubtitle:x["b"],VListItemTitle:x["c"],VRow:Xe["a"]});var bt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return void 0!==e.items||void 0!==e.item?r("v-container",{staticClass:"py-16",attrs:{fluid:""}},[r("Quick-start"),r("v-row",[r("v-col",{attrs:{cols:"12",md:"6","order-md":"1"}},[void 0!==e.item?r("v-card",{staticClass:"mx-auto mt-2",attrs:{color:"primary","max-width":"900"}},[r("v-card-text",[r("div",{staticClass:"d-flex justify-space-between"},[r("div",{staticClass:"card-header"},[r("p",[e._v("Valt inventarie")]),r("h2",[e._v(" "+e._s(e.item.itemName)+" ")])]),r("div",{staticClass:"edit-buttons d-flex",attrs:{color:"accent2"}},[r("Edit-item"),r("Delete-dialog")],1)]),r("v-img",{attrs:{height:"200",src:e.image}}),r("div",{staticClass:"text--primary"},[r("p",[e._v("Beskrivning: "+e._s(e.item.description))])])],1),r("v-card-actions",[r("v-btn",{attrs:{text:"","x-large":"",color:"secondary"},on:{click:function(t){e.reveal=!0}}},[e._v(" Visa mer ")])],1),r("v-expand-transition",[e.reveal?r("v-card",{staticClass:"transition-fast-in-fast-out v-card--reveal d-flex flex-column justify-space-between",staticStyle:{height:"100%"},attrs:{color:"primary"}},[r("v-card-text",{staticClass:"pb-0"},[r("p",[e._v("Garanti: "+e._s(e.item.warranty))]),r("p",[e._v("Inköpsdatum: "+e._s(e.item.orderDate))]),r("p",[e._v("Rum: Köket")]),r("p",[e._v("Projekt: "+e._s(e.item.warranty))]),r("div",{staticClass:"d-flex justify-space-between align-center"},[e.item.fileId?r("div",[r("v-icon",[e._v("mdi-arrow-up-bold-box-outline")]),e._v(" Namn på filen ")],1):e._e(),r("v-btn",{attrs:{color:"accent2",href:e.fileURL}},[e._v("hämta fil ")])],1)]),r("v-card-actions",{staticClass:"pt-0"},[r("v-btn",{attrs:{text:"","x-large":"",color:"secondary"},on:{click:function(t){e.reveal=!1}}},[e._v(" Stäng ")])],1)],1):e._e()],1)],1):e._e()],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-card",{staticClass:"mx-auto mt-1",attrs:{"max-width":"900",color:"primary"}},[r("v-card-text",[r("h5",[e._v("Alla inventarier")]),e._l(e.items,(function(t,o){return r("v-list-item",{key:o,attrs:{"two-line":""}},[r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(t.itemName))]),r("v-list-item-subtitle",[e._v(" "+e._s(t.description)+", ")])],1),r("v-list-item-action",[r("v-btn",{attrs:{icon:""},on:{click:function(r){return e.openItemDetails(t)}}},[r("v-icon",{attrs:{color:"secondary"}},[e._v("mdi-open-in-new")])],1)],1)],1)}))],2)],1)],1)],1)],1):e._e()},_t=[],Rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"344"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",n,!1),o),[r("v-icon",{attrs:{color:"secondary"}},[e._v("mdi-delete")])],1)]}}]),model:{value:e.dialogBox,callback:function(t){e.dialogBox=t},expression:"dialogBox"}},[r("v-card",[r("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v("Radera inventarie")]),r("v-card-text",[r("div",{staticClass:"text-h5 mt-4 text-center"},[e._v(" Vill du radera "+e._s(e.item.itemName)+"? ")])]),r("v-card-actions",{staticClass:"justify-center"},[r("v-btn",{attrs:{color:"accent1"},on:{click:function(t){return e.deleteItemHandler(e.item._id)}}},[e._v("JA")]),r("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.dialogBox=!1}}},[e._v("NEJ")])],1)],1)],1)},Ot=[],kt={name:"deleteDialog",data:function(){return{dialogBox:!1}},methods:{deleteItemHandler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("ITEMS/deleteItem",e);case 2:0!==t.$store.getters["ITEMS/getItems"].length?localStorage.setItem("currentItem",JSON.stringify(t.$store.getters["ITEMS/getItems"][0])):localStorage.setItem("currentItem",[]),t.$store.dispatch("ITEMS/setItems"),t.$store.dispatch("PROJECT/setProjects"),t.dialogBox=!1;case 6:case"end":return r.stop()}}),r)})))()}},computed:{item:function(){return this.$store.getters["ITEMS/getItem"]}}},wt=kt,Pt=Object(m["a"])(wt,Rt,Ot,!1,null,null,null),St=Pt.exports;p()(Pt,{VBtn:v["a"],VCard:L["a"],VCardActions:A["a"],VCardText:A["b"],VDialog:Je["a"],VIcon:h["a"],VToolbar:st["a"]});var yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({attrs:{icon:""},on:{click:e.storeOldId}},"v-btn",n,!1),o),[r("v-icon",{attrs:{color:"secondary"}},[e._v("mdi-pencil")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",{staticClass:"mx-auto mt-2",attrs:{color:"base"}},[r("v-card-title",[e._v(" Lägg till inventarie ")]),r("v-text-field",{attrs:{label:"Namn",rules:e.rules,placeholder:"itemName"},model:{value:e.item.itemName,callback:function(t){e.$set(e.item,"itemName",t)},expression:"item.itemName"}}),r("v-text-field",{attrs:{label:"Garanti",rules:e.rules,placeholder:"Hur många års garanti har produkten"},model:{value:e.item.warranty,callback:function(t){e.$set(e.item,"warranty",t)},expression:"item.warranty"}}),r("v-textarea",{attrs:{label:"Beskriving",rules:e.rules},model:{value:e.item.description,callback:function(t){e.$set(e.item,"description",t)},expression:"item.description"}}),r("v-select",{attrs:{"prepend-icon":"mdi-calendar-check-outline",items:e.projects.map((function(e){return e})),"item-text":"projectName","item-value":"_id",placeholder:e.project.projectName},model:{value:e.item.projectId,callback:function(t){e.$set(e.item,"projectId",t)},expression:"item.projectId"}}),r("v-select",{attrs:{"prepend-icon":"mdi-home-city",items:e.rooms.map((function(e){return e})),"item-text":"roomName","item-value":"_id",placeholder:e.item.roomId},model:{value:e.item.roomId,callback:function(t){e.$set(e.item,"roomId",t)},expression:"item.roomId"}}),r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,n=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:"Inköpsdatum","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.item.orderDate,callback:function(t){e.$set(e.item,"orderDate",t)},expression:"item.orderDate"}},"v-text-field",n,!1),o))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[r("v-date-picker",{ref:"picker",attrs:{max:(new Date).toISOString().substr(0,10),min:"1950-01-01"},model:{value:e.item.orderDate,callback:function(t){e.$set(e.item,"orderDate",t)},expression:"item.orderDate"}})],1),r("v-img",{staticClass:"mb-2",attrs:{contain:"","lazy-src":e.image,src:e.image,"max-height":"100 "}}),r("ImageUploader"),r("FileUploader"),e.item.fileId?r("div",[r("v-icon",[e._v("mdi-arrow-up-bold-box-outline")]),e._v(e._s(e.item.fileId))],1):e._e(),r("v-card-actions",[r("v-btn",{attrs:{color:"accent2"},on:{click:e.updateItemHandler}},[e._v(" Spara ")])],1)],1)],1)},Ct=[],Et={components:{ImageUploader:se,FileUploader:pe},name:"UpdateItem",data:function(){return{rules:[function(e){return!!e||"Required."},function(e){return e&&e.length>=3||"Min 3 characters"}],date:null,menu:!1,inputField:!1,dialog:!1}},watch:{menu:function(e){var t=this;e&&setTimeout((function(){return t.$refs.picker.activePicker="YEAR"}))}},computed:{item:function(){return this.$store.getters["ITEMS/getItem"]},image:function(){return"api/images/"+this.$store.getters["ITEMS/getItem"].imageId},projects:function(){return this.$store.getters["PROJECT/getProjects"]},project:function(){return void 0!==this.$store.getters["PROJECT/getProjectFromProjects"](this.item.projectId)?this.$store.getters["PROJECT/getProjectFromProjects"](this.item.projectId):[]},rooms:function(){return this.$store.getters["ROOM/getRooms"]},room:function(){return this.$store.getters["ROOM/getRoomFromRooms"](this.item.roomId)}},methods:{storeOldId:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.commit("PROJECT/setOldProject",e.project);case 2:return t.next=4,e.$store.commit("IMAGE/setOldImage",e.item.imageId);case 4:return t.next=6,e.$store.commit("FILE/setOldFile",e.item.fileId);case 6:case"end":return t.stop()}}),t)})))()},save:function(e){this.$refs.menu.save(e)},updateItemHandler:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={_id:e.item._id,itemName:e.item.itemName,imageId:e.$store.getters["IMAGE/getImage"],description:e.item.description,orderDate:e.item.orderDate,fileId:e.$store.getters["FILE/getFile"]._id,warranty:e.item.warranty,projectId:e.item.projectId,roomId:e.item.roomId},t.next=3,e.$store.dispatch("ITEMS/updateItem",r);case 3:return localStorage.setItem("currentItem",JSON.stringify(e.$store.getters["ITEMS/getItem"])),t.next=6,e.$store.dispatch("FILE/updateFile",r.fileId);case 6:return t.next=8,e.$store.dispatch("PROJECT/setProject",e.project);case 8:return t.next=10,e.$store.dispatch("PROJECT/moveItemToProject",e.$store.getters["ITEMS/getItem"]._id);case 10:e.dialog=!1;case 11:case"end":return t.stop()}}),t)})))()}}},Tt=Et,$t=Object(m["a"])(Tt,yt,Ct,!1,null,null,null),Vt=$t.exports;p()($t,{VBtn:v["a"],VCard:L["a"],VCardActions:A["a"],VCardTitle:A["c"],VDatePicker:ve["a"],VDialog:Je["a"],VIcon:h["a"],VImg:q["a"],VMenu:he["a"],VSelect:Ie["a"],VTextField:je["a"],VTextarea:xe["a"]});var Ft={namespaced:!0,name:"item",data:function(){return{reveal:!1,file:{}}},components:{QuickStart:Ae,DeleteDialog:St,EditItem:Vt},methods:{openItemDetails:function(e){this.$store.dispatch("ITEMS/setItem",e),this.$store.dispatch("IMAGE/setImage",this.$store.getters["ITEMS/getItem"].imageId),localStorage.setItem("currentItem",JSON.stringify(e)),window.scrollTo(0,0)}},computed:{fileURL:function(){return"/api/files/"+this.$store.getters["ITEMS/getItem"].fileId},items:function(){return this.$store.getters["ITEMS/getItems"]},item:function(){return this.$store.getters["ITEMS/getItem"]},image:function(){return"api/images/"+this.$store.getters["ITEMS/getItem"].imageId},files:function(){return this.$store.getters["FILE/getFiles"]}}},Ht=Ft,Nt=(r("207a"),r("0789")),Mt=Object(m["a"])(Ht,bt,_t,!1,null,"406d8ca3",null),Jt=Mt.exports;p()(Mt,{VBtn:v["a"],VCard:L["a"],VCardActions:A["a"],VCardText:A["b"],VCol:We["a"],VContainer:Me["a"],VExpandTransition:Nt["a"],VIcon:h["a"],VImg:q["a"],VListItem:j["a"],VListItemAction:It["a"],VListItemContent:x["a"],VListItemSubtitle:x["b"],VListItemTitle:x["c"],VRow:Xe["a"]});var Dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-main",{staticClass:"main"},[r("v-container",{attrs:{fluid:"","fill-height":""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[r("v-card",{staticClass:"elevation-12"},[r("v-toolbar",{attrs:{dark:"",color:"primary"}},[r("v-toolbar-title",[e._v("Logga in")])],1),r("v-card-text",[r("v-form",[r("v-text-field",{attrs:{name:"email",label:"Email",type:"text"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("v-text-field",{attrs:{id:"password",name:"password",label:"Lösenord",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("router-link",{attrs:{to:"/signup"}},[e._v("Inte registrerad? Registrera dig här.")])],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"accent2"},on:{click:e.loginHandler}},[e._v("Logga in")])],1)],1)],1)],1)],1)],1)],1)},Lt=[],At={name:"Login",data:function(){return{email:"",password:"",error:!1}},methods:{loginHandler:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={email:e.email,password:e.password},t.next=3,e.$store.dispatch("SESSION/login",r).then((function(){!0===e.$store.getters["SESSION/getLoggedIn"]&&(e.$store.dispatch("PROJECT/setProjects"),e.$store.dispatch("HOUSE/setHouses"),e.$router.push({name:"Home"}))}));case 3:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("SESSION/setInSignup",!1);case 2:return t.next=4,e.$store.dispatch("SESSION/setInLogin",!0);case 4:case"end":return t.stop()}}),t)})))()}},Bt=At,Ut=(r("039a"),r("0e8f")),Gt=r("a722"),zt=r("2a7f"),qt=Object(m["a"])(Bt,Dt,Lt,!1,null,null,null),Qt=qt.exports;p()(qt,{VApp:P["a"],VBtn:v["a"],VCard:L["a"],VCardActions:A["a"],VCardText:A["b"],VContainer:Me["a"],VFlex:Ut["a"],VForm:ae["a"],VLayout:Gt["a"],VMain:S["a"],VSpacer:Pe["a"],VTextField:je["a"],VToolbar:st["a"],VToolbarTitle:zt["a"]});var Kt=r("2f62"),Yt=(r("4de4"),r("7db0"),r("c740"),r("a434"),r("d3b7"),"api/"),Wt={Accept:"application/json"},Xt={namespaced:!0,state:{projects:[],project:[],oldProject:[]},getters:{getProjects:function(e){return e.projects},getProjectFromProjects:function(e){return function(t){return e.projects.find((function(e){return e._id===t}))}},getProject:function(e){return e.project}},mutations:{setProjects:function(e,t){e.projects=t},setProject:function(e,t){e.project=t,console.log("payload",t)},setProjectFromStorage:function(e,t){if(t){var r=JSON.parse(localStorage.getItem("currentProject")||"[]");0!==r.length||0===e.projects.length?t._id===r.userParentId&&(e.project=r):e.project=e.projects[0]}},setOldProject:function(e,t){e.oldProject=t},createProject:function(e,t){e.projects.push(t)},addItemToProject:function(e,t){e.project.itemsId.push(t)},deleteItemFromProject:function(e,t){var r=e.oldProject.itemsId.findIndex((function(e){return e._id===t}));r>-1&&e.oldProject.itemsId.splice(r,1)},deleteProjectFromState:function(e,t){var r=e.projects.findIndex((function(e){return e._id===t}));r>-1&&e.projects.splice(r,1),0!==e.projects.length?e.project=e.projects[0]:e.project=[]}},selectedItem:function(e){return e.items.find((function(t){return t.id==e.selectedId}))},actions:{getProjectFromProjects:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.getters["getProjectFromProjects"](t);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},setProjects:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,o,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/loggedIn");case 2:return r=t.sent,t.next=5,r.json();case 5:return o=t.sent,t.next=8,fetch(Yt+"projects",{headers:Wt});case 8:return n=t.sent,t.next=11,n.json();case 11:a=t.sent,e.commit("setProjects",a),e.commit("setProjectFromStorage",o);case 14:case"end":return t.stop()}}),t)})))()},setProject:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.commit("setProject",t);case 2:case"end":return r.stop()}}),r)})))()},addItemToProject:function(e,t){if(0!==e.getters["getProject"].length){var r=e.getters["getProject"];1!==r.itemsId.filter((function(e){return e._id===t})).length&&e.commit("addItemToProject",t)}},moveItemToProject:function(e,t){if(void 0!==e.getters["getProject"].itemsId){var r=e.getters["getProject"];if(0===r.itemsId.length)return e.commit("addItemToProject",t),e.dispatch("updateProject",e.getters["getProject"]),e.commit("deleteItemFromProject",t),void e.dispatch("updateProject",this.state.PROJECT.oldProject);1!==r.itemsId.filter((function(e){return e._id===t})).length&&(e.commit("addItemToProject",t),e.dispatch("updateProject",r),e.commit("deleteItemFromProject",t),e.dispatch("updateProject",this.state.PROJECT.oldProject))}},createProject:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch(Yt+"newproject",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(){e.dispatch("setProjects")}));case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}}),r)})))()},updateProject:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("det uppdaterade projektet",t),r.next=3,fetch(Yt+"projects/"+t._id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(){e.commit("setProject",t)}));case 3:return o=r.sent,r.abrupt("return",o);case 5:case"end":return r.stop()}}),r)})))()},deleteProject:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch(Yt+"projects/"+t,{method:"DELETE"}).then((function(e){return e.json()})).then((function(){e.commit("deleteProjectFromState",t)}));case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}}),r)})))()}}},Zt="/api/",er={Accept:"application/json"},tr={namespaced:!0,state:{rooms:[],room:[],computedRooms:[]},getters:{getRooms:function(e){return e.rooms},getComputedRooms:function(e){return e.computedRooms},getRoom:function(e){return e.room},getRoomFromRooms:function(e){return function(t){return e.rooms.find((function(e){return e._id===t}))}}},mutations:{setRooms:function(e,t){e.rooms=t},setRoom:function(e,t){e.room=t},updateRooms:function(e,t){e.rooms.push(t)},addProjectToRoom:function(e,t){e.room.projects.push(t)},addItemToRoom:function(e,t){e.room.items.push(t)},updateToRoomsWithHouseId:function(e,t){var r=e.rooms.filter((function(e){var r=e.houseId;return r==t}));e.computedRooms=r}},actions:{setRooms:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(Zt+"rooms",{headers:er});case 2:return r=t.sent,t.next=5,r.json();case 5:o=t.sent,e.commit("setRooms",o);case 7:case"end":return t.stop()}}),t)})))()},computedRooms:function(e,t){e.commit("updateToRoomsWithHouseId",t)},createRoom:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch(Zt+"newroom",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){e.commit("setRoom",t),e.commit("updateRooms",t)}));case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}}),r)})))()},addProjectToRoom:function(e,t){if(0!==e.getters["getRoom"].length){var r=e.getters["getRoom"];1!==r.projects.filter((function(e){return e._id===t})).length&&e.commit("addProjectToRoom",t)}},addItemToRoom:function(e,t){if(0!==e.getters["getRoom"].length){var r=e.getters["getRoom"];1!==r.items.filter((function(e){return e._id===t})).length&&e.commit("addItemToRoom",t)}},setRoom:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.commit("setRoom",t);case 2:case"end":return r.stop()}}),r)})))()},updateRoom:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(Zt+"rooms/"+t._id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()}}},rr="/api/",or={Accept:"application/json"},nr={namespaced:!0,state:{items:[],item:[],oldItem:[]},getters:{getItems:function(e){return e.items},getItem:function(e){return e.item},getItemFromItems:function(e){return function(t){return e.items.find((function(e){return e._id===t}))}}},mutations:{setItems:function(e,t){e.items=t},setItem:function(e,t){e.item=t},createItem:function(e,t){e.items.push(t)},setItemFromStorage:function(e,t){if(t){var r=JSON.parse(localStorage.getItem("currentItem")||"[]");t._id===r.userParentId&&(e.item=r)}},updateItem:function(e,t){var r=e.items.findIndex((function(e){return e._id===t._id}));r>-1&&e.items.splice(r,1,t)},deleteItemFromState:function(e,t){var r=e.items.findIndex((function(e){return e._id===t}));r>-1&&e.items.splice(r,1),0!==e.items.length?e.item=e.items[0]:e.item=[]},deleteProjectFromItem:function(e,t){var r=e.oldItem.projectId.findIndex((function(e){return e._id===t}));r>-1&&e.oldItem.projectId.splice(r,1)}},actions:{setItems:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(rr+"items",{headers:or});case 2:return r=t.sent,t.next=5,r.json();case 5:o=t.sent,e.commit("setItems",o);case 7:case"end":return t.stop()}}),t)})))()},setItem:function(e,t){e.commit("setItem",t)},setItemFromStorage:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/loggedIn");case 2:return r=t.sent,t.next=5,r.json();case 5:o=t.sent,e.commit("setItemFromStorage",o);case 7:case"end":return t.stop()}}),t)})))()},createItem:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch(rr+"newitem",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){e.commit("createItem",t),e.commit("setItem",t)}));case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}}),r)})))()},deleteItem:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch(rr+"items/"+t,{method:"DELETE"}).then((function(e){return e.json()})).then((function(){e.commit("deleteItemFromState",t)}));case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}}),r)})))()},updateItem:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch(rr+"items/"+t._id,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){e.commit("updateItem",t),e.commit("setItem",t)}));case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}}),r)})))()},moveProjectToItems:function(e,t){if(void 0!==e.getters["getItem"].projectId){var r=e.getters["getItem"];if(0===r.projectId.length)return e.commit("addProjectToItem",t),e.dispatch("updateItem",e.getters["getItem"]),e.commit("deleteItemFromProject",t),void e.dispatch("updateItem",this.state.ITEM.oldItem);1!==r.projectId.filter((function(e){return e._id===t})).length&&(e.commit("addProjecToItem",t),e.dispatch("updateItem",r),e.commit("deleteItemFromProject",t),e.dispatch("updateItem",this.state.ITEM.oldItem))}},addProjectToItem:function(e,t){if(0!==e.getters["getItem"].length){var r=e.getters["getItem"];1!==r.projectId.filter((function(e){return e._id===t})).length&&e.commit("addProjectToItem",t)}}}},ar="api/",ir={namespaced:!0,state:{loggedIn:!1,inSignup:!1,inLogin:!0},getters:{getLoggedIn:function(e){return e.loggedIn},getInSignup:function(e){return e.inSignup},getInLogin:function(e){return e.inLogin}},mutations:{setLoggedIn:function(e,t){e.loggedIn=t},setLoggedInFromStorage:function(e){e.loggedIn=JSON.parse(localStorage.getItem("loggedIn")||!1)},inLogin:function(e,t){e.inLogin=t},inSignup:function(e,t){e.inSignup=t}},actions:{login:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch(ar+"session/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:t.email,password:t.password})}).then((function(t){200===t.status?(e.commit("setLoggedIn",!0),localStorage.setItem("loggedIn",JSON.stringify(!0))):e.commit("setLoggedIn",!1)}));case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}}),r)})))()},logout:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(ar+"session/logout",{method:"POST",credentials:"include"}).then((function(t){200===t.status?(e.commit("setLoggedIn",!1),localStorage.setItem("loggedIn",JSON.stringify(!1))):e.commit("setLoggedIn",!0)}));case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},signup:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(ar+"newuser",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()},setLoggedInFromStorage:function(e){e.commit("setLoggedInFromStorage")},setInLogin:function(e,t){e.commit("inLogin",t)},setInSignup:function(e,t){e.commit("inSignup",t)}}},sr="/api/",cr={namespaced:!0,state:{image:[],oldImageId:[]},getters:{getImage:function(e){return e.image}},mutations:{setImage:function(e,t){e.image=t},setOldImage:function(e,t){e.oldImageId=t}},actions:{setImage:function(e,t){e.commit("setImage",t)},updateImage:function(e,t){t!==this.state.IMAGE.oldImageId&&(console.log("ta bort gammal bild",this.state.IMAGE.oldImageId),e.dispatch("deleteImageFromDB",this.state.IMAGE.oldImageId))},uploadImageToDB:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=new FormData,o.append("image",t,t.name),r.next=4,fetch(sr+"images",{method:"POST",body:o}).then((function(e){return e.json()})).then((function(t){e.commit("setImage",t)}));case 4:return n=r.sent,r.abrupt("return",n);case 6:case"end":return r.stop()}}),r)})))()},deleteImageFromDB:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(sr+"images/"+t,{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){console.log("image deleted tralalal"+e)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()}}},lr="/api/",ur={Accept:"application/json"},mr={namespaced:!0,state:{houses:[],house:[]},getters:{getHouses:function(e){return e.houses},getHouse:function(e){return e.house},getHouseFromHouses:function(e){return function(t){return e.houses.find((function(e){return e._id===t}))}}},mutations:{setHouses:function(e,t){e.houses=t},setHouse:function(e,t){e.house=t},addRoomToHouse:function(e,t){e.house.rooms.push(t)},setHouseFromStorage:function(e,t){if(t){var r=JSON.parse(localStorage.getItem("currentHouse")||"[]");if(0===r.length&&0!==e.houses.length)return e.house=e.houses[0],void localStorage.setItem("currentHouse",JSON.stringify(e.house));t._id===r.userParentId&&(e.house=r)}}},actions:{setHouseFromStorage:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/loggedIn");case 2:return r=t.sent,t.next=5,r.json();case 5:o=t.sent,e.commit("setHouseFromStorage",o);case 7:case"end":return t.stop()}}),t)})))()},setHouses:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,o,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(lr+"houses",{headers:ur});case 2:return r=t.sent,t.next=5,r.json();case 5:return o=t.sent,t.next=8,fetch("/api/loggedIn");case 8:return n=t.sent,t.next=11,n.json();case 11:a=t.sent,e.commit("setHouses",o),e.commit("setHouseFromStorage",a);case 14:case"end":return t.stop()}}),t)})))()},setHouseFromDb:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch(lr+"houses/"+t,{headers:ur});case 2:return o=r.sent,r.next=5,o.json();case 5:n=r.sent,e.commit("setHouse",n);case 7:case"end":return r.stop()}}),r)})))()},createHouse:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch(lr+"newhouse",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(){e.dispatch("setHouses")}));case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}}),r)})))()},setHouse:function(e,t){e.commit("setHouse",t)},updateHouse:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(lr+"houses/"+t._id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()},addRoomToHouse:function(e,t){e.commit("addRoomToHouse",t)}}},dr="/api/",pr={namespaced:!0,state:{files:[],file:[],oldFileId:[]},getters:{getFile:function(e){return e.file},getFiles:function(e){return e.files}},mutations:{setFile:function(e,t){e.file=t},setFiles:function(e,t){e.files=t},setOldFile:function(e,t){e.oldFileId=t}},actions:{setFile:function(e,t){e.commit("setImage",t)},setFiles:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(dr+"files");case 2:return r=t.sent,t.next=5,r.json();case 5:o=t.sent,e.commit("setFiles",o),console.log("hömtat alla fileid");case 8:case"end":return t.stop()}}),t)})))()},updateFile:function(e,t){console.log(t+"nytt id "+this.state.FILE.oldFileId+"gammalt id"),void 0!==this.state.IMAGE.oldFileID?t!==this.state.IMAGE.oldFileId?(console.log("ta bort gammal fil"),e.dispatch("deleteFileFromDB",this.state.FILE.oldFileId)):console.log("finns inget att updatera"):console.log("tomt oldFileId")},uploadFileToDB:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("addfile",t),o=new FormData,o.append("file",t,t.name),r.next=5,fetch(dr+"files",{method:"POST",body:o}).then((function(e){return e.json()})).then((function(t){e.commit("setFile",t),console.log(t,"fileupload complete")}));case 5:return n=r.sent,r.abrupt("return",n);case 7:case"end":return r.stop()}}),r)})))()},deleteFileFromDB:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(dr+"files/"+t,{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){console.log("file deleted"+e._id)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()}}};o["a"].use(Kt["a"]);var gr=new Kt["a"].Store({modules:{PROJECT:Xt,ROOM:tr,ITEMS:nr,SESSION:ir,IMAGE:cr,HOUSE:mr,FILE:pr}}),fr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"py-16",attrs:{fluid:"","min-width":"300"}},[r("Quick-start"),r("v-row",[r("v-col",{attrs:{sm:"12","order-md":"1",color:"secondary"}},[r("v-card",{staticClass:"mx-auto mt-2 px-1 ",attrs:{color:"primary","max-width":"900","min-width":"280"}},[r("v-card-title",{staticClass:"mb-2"},[r("h1",[e._v("Mitt Boende")])]),e.currentHouseId?r("v-select",{staticClass:"selectHouse",attrs:{filled:"",rounded:"","prepend-icon":"mdi-calendar-check-outline",items:e.houses.map((function(e){return e})),"item-text":"houseName","item-value":"_id",placeholder:e.placeholderText},on:{change:function(t){return e.goToHouseHandler(e.currentHouseId)}},model:{value:e.currentHouseId,callback:function(t){e.currentHouseId=t},expression:"currentHouseId"}}):e._e(),r("div",{staticClass:"d-flex flex-column"},[r("p",{staticClass:"my-1"},[e._v("Kategori: "+e._s(e.house.houseCategory))]),r("p",{staticClass:"my-1"},[e._v("Antal Kvm: "+e._s(e.house.houseSize))]),r("p",{staticClass:"my-1"},[e._v("Antal rum: "+e._s(e.house.numberOfRooms))])]),r("v-col",{attrs:{cols:"12"}},e._l(e.computedRooms,(function(t){return r("v-expansion-panels",{key:t._id,staticClass:"pb-1",attrs:{popout:"",color:"primary"}},[r("v-expansion-panel",[r("v-expansion-panel-header",{attrs:{color:"primary"}},[e._v(e._s(t.roomName))]),r("v-expansion-panel-content",{attrs:{color:"primary"}},[r("p",[e._v("Höjd till tak: "+e._s(t.roomHeight))]),r("p",[e._v("Antal kvadratmeter "+e._s(t.roomSize))]),r("div",{staticClass:"projects"},[r("h5",[e._v("Projekt")]),r("v-expansion-panels",{staticClass:"mt-2",attrs:{popout:"",color:"primary"}},e._l(t.projects,(function(t){return r("v-expansion-panel",{key:t._id},[r("v-expansion-panel-header",{attrs:{color:"primary"}},[e._v(" "+e._s(t.projectName)+" ")]),r("v-expansion-panel-content",{attrs:{color:"primary"}},[r("p",[e._v("Beskrivning")]),e._v(" "+e._s(t.description)+" "),r("div",{staticClass:"btn_div"},[r("v-btn",{staticClass:"align-self-center",attrs:{fab:"",color:"accent2"},on:{click:function(r){return e.goToProjectHandler(t)}}},[r("v-icon",{attrs:{color:"white"}},[e._v("mdi-arrow-right")])],1)],1)])],1)})),1)],1),r("div",{staticClass:"items"},[r("h5",[e._v("Inventarier")]),r("v-expansion-panels",{staticClass:"mt-2",attrs:{popout:"",color:"primary"}},e._l(t.items,(function(t){return r("v-expansion-panel",{key:t._id},[r("v-expansion-panel-header",{attrs:{color:"primary"}},[e._v(" "+e._s(t.itemName)+" ")]),r("v-expansion-panel-content",{attrs:{color:"primary"}},[r("p",[e._v("Beskrivning")]),e._v(" "+e._s(t.description)+" "),r("div",{staticClass:"btn_div"},[r("v-btn",{staticClass:"align-self-center",attrs:{fab:"",color:"accent2"},on:{click:function(r){return e.goToItemHandler(t)}}},[r("v-icon",{attrs:{color:"white"}},[e._v("mdi-arrow-right")])],1)],1)])],1)})),1)],1)])],1)],1)})),1)],1)],1)],1),r("v-card",{staticClass:"mx-auto pt-2 mt-4 d-flex justify-space-around align-center flex-wrap",attrs:{"max-width":"900",color:"primary",height:"20rem"}},[r("v-dialog",{attrs:{"max-width":"800"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[r("div",e._g({staticClass:"house_button"},o),[r("div",{staticClass:"inside_div"},[r("h3",{staticClass:"skapa_hus_title"},[e._v("Skapa hus")])])])]}}]),model:{value:e.dialogHouse,callback:function(t){e.dialogHouse=t},expression:"dialogHouse"}},[r("CreateHouse",{on:{"close-dialog":e.closeDialogHouse}})],1),r("v-dialog",{attrs:{"max-width":"800"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[r("div",e._g({staticClass:"room_button"},o),[r("div",{staticClass:"inside_div"},[r("h3",{staticClass:"skapa_hus_title"},[e._v("Skapa Rum")])])])]}}]),model:{value:e.dialogRoom,callback:function(t){e.dialogRoom=t},expression:"dialogRoom"}},[r("CreateRoom",{on:{"close-dialog":e.closeDialogRoom}})],1)],1)],1)},vr=[],hr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center"},[r("v-card",{staticClass:"mx-auto mt-2 px-1",attrs:{color:"base"}},[r("v-card-title",{attrs:{placeholder:"test"}},[e._v(" Skapa nytt hus ")]),r("v-text-field",{attrs:{label:"Namn",rules:e.rules,placeholder:"Skriv in namnet på ditt hus"},model:{value:e.houseName,callback:function(t){e.houseName=t},expression:"houseName"}}),r("v-text-field",{attrs:{label:"Boendekategori",placeholder:"Ange vilken typ av boende detta är"},model:{value:e.houseCategory,callback:function(t){e.houseCategory=t},expression:"houseCategory"}}),r("v-text-field",{attrs:{label:"Husets storlek",placeholder:"Ange husets area"},model:{value:e.houseSize,callback:function(t){e.houseSize=t},expression:"houseSize"}}),r("v-text-field",{attrs:{label:"Antal rum",placeholder:"Ange antal rum"},model:{value:e.numberOfRooms,callback:function(t){e.numberOfRooms=t},expression:"numberOfRooms"}}),r("v-card-actions",[r("v-btn",{on:{click:e.createHouseHandler}},[e._v(" Skapa hus ")]),r("v-spacer")],1)],1)],1)},Ir=[],jr={name:"CreateHouse",data:function(){return{houseName:"",houseSize:"",numberOfRooms:"",houseCategory:"",rooms:[],projects:[],rules:[function(e){return!!e||"Required."},function(e){return e&&e.length>=3||"Min 3 characters"}]}},methods:{createHouseHandler:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r={houseName:e.houseName,houseCategory:e.houseCategory,houseSize:e.houseSize,numberOfRooms:e.numberOfRooms,rooms:e.rooms,projects:e.projects},e.$store.dispatch("HOUSE/createHouse",r),e.$emit("close-dialog");case 3:case"end":return t.stop()}}),t)})))()}}},xr=jr,br=Object(m["a"])(xr,hr,Ir,!1,null,null,null),_r=br.exports;p()(br,{VBtn:v["a"],VCard:L["a"],VCardActions:A["a"],VCardTitle:A["c"],VSpacer:Pe["a"],VTextField:je["a"]});var Rr={data:function(){return{currentHouseId:this.$store.getters["HOUSE/getHouse"],dialogRoom:!1,dialogHouse:!1,placeholderText:"Välj hus att visa",colors:["indigo","warning","pink darken-2","red lighten-1","deep-purple accent-4"],slides:["First","Second","Third","Fourth","Fifth"]}},name:"Home",components:{QuickStart:Ae,CreateHouse:_r,CreateRoom:Fe},methods:{closeDialogRoom:function(){this.dialogRoom=!1},closeDialogHouse:function(){this.dialogHouse=!1},log:function(e){console.log(e)},goToProjectHandler:function(e){this.$store.dispatch("PROJECT/setProject",e),localStorage.setItem("currentProject",JSON.stringify(e)),this.$router.push("Project")},goToItemHandler:function(e){this.$store.dispatch("ITEMS/setItem",e),localStorage.setItem("currentItem",JSON.stringify(e)),this.$router.push("Item")},goToHouseHandler:function(e){var t=this.$store.getters["HOUSE/getHouseFromHouses"](this.currentHouseId);localStorage.setItem("currentHouse",JSON.stringify(t)),this.$store.dispatch("HOUSE/setHouse",t),this.$store.dispatch("ROOM/computedRooms",e)}},computed:{houses:function(){return this.$store.getters["HOUSE/getHouses"]},house:function(){return this.$store.getters["HOUSE/getHouse"]},computedRooms:function(){return this.$store.getters["ROOM/getComputedRooms"]}}},Or=Rr,kr=(r("0854"),Object(m["a"])(Or,fr,vr,!1,null,null,null)),wr=kr.exports;p()(kr,{VBtn:v["a"],VCard:L["a"],VCardTitle:A["c"],VCol:We["a"],VContainer:Me["a"],VDialog:Je["a"],VExpansionPanel:B["a"],VExpansionPanelContent:U["a"],VExpansionPanelHeader:G["a"],VExpansionPanels:z["a"],VIcon:h["a"],VRow:Xe["a"],VSelect:Ie["a"]});var Pr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-main",[r("v-container",{attrs:{fluid:"","fill-height":""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[r("v-card",{staticClass:"elevation-12"},[r("v-toolbar",{attrs:{dark:"",color:"primary"}},[r("v-toolbar-title",[e._v("Registrering")])],1),r("v-card-text",[r("v-form",[r("v-text-field",{attrs:{name:"firstName",label:"Förnamn",type:"text"},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),r("v-text-field",{attrs:{name:"lastName",label:"Efternamn",type:"lastName"},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),r("v-text-field",{attrs:{name:"email",label:"Email",type:"text"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("v-text-field",{attrs:{id:"password",name:"password",label:"Lösenord",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:e.signupHandler}},[e._v("Registrera")])],1)],1)],1)],1)],1)],1)],1)},Sr=[],yr={name:"Signup",data:function(){return{email:"",password:"",firstName:"",lastName:"",error:!1}},methods:{signupHandler:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password},t.next=3,e.$store.dispatch("SESSION/signup",r).then((function(){e.$router.push({name:"Login"})}));case 3:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.$store.dispatch("SESSION/setInSignup",!0),this.$store.dispatch("SESSION/setInLogin",!1)}},Cr=yr,Er=Object(m["a"])(Cr,Pr,Sr,!1,null,null,null),Tr=Er.exports;p()(Er,{VApp:P["a"],VBtn:v["a"],VCard:L["a"],VCardActions:A["a"],VCardText:A["b"],VContainer:Me["a"],VFlex:Ut["a"],VForm:ae["a"],VLayout:Gt["a"],VMain:S["a"],VSpacer:Pe["a"],VTextField:je["a"],VToolbar:st["a"],VToolbarTitle:zt["a"]}),o["a"].use(V["a"]);var $r=[{path:"/",name:"Home",component:et,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:Qt},{path:"/signup",name:"Signup",component:Tr},{path:"/project",name:"Project",component:xt,meta:{requiresAuth:!0}},{path:"/item",name:"Item",component:Jt,meta:{requiresAuth:!0}},{path:"/house",name:"House",component:wr,meta:{requiresAuth:!0}}],Vr=new V["a"]({mode:"history",base:"/",routes:$r});Vr.beforeEach((function(e,t,r){gr.dispatch("SESSION/setLoggedInFromStorage");var o=gr.getters["SESSION/getLoggedIn"];e.matched.some((function(e){return e.meta.requiresAuth}))?o?r():r({path:"/login",query:{redirect:e.fullPath}}):"Login"===e.name||"Signup"===e.name?r():r({path:"/",query:{redirect:e.fullPath}})}));var Fr=Vr;o["a"].config.productionTip=!1,new o["a"]({store:gr,vuetify:$,router:Fr,render:function(e){return e(C)}}).$mount("#app")},"5ced":function(e,t,r){},6374:function(e,t,r){},6888:function(e,t,r){"use strict";r("8d01")},7174:function(e,t,r){},"8d01":function(e,t,r){},a1fe:function(e,t,r){},a5b5:function(e,t,r){},ae50:function(e,t,r){"use strict";r("bf27")},bf27:function(e,t,r){},c782:function(e,t,r){"use strict";r("a1fe")},cccb:function(e,t,r){"use strict";r("5ced")},d53e:function(e,t,r){},e1ba:function(e,t,r){"use strict";r("a5b5")}});
//# sourceMappingURL=app.d273e9d8.js.map